{"version":3,"sources":["content.js"],"names":["fullBlockList","clearWP","forEach","sel","document","querySelectorAll","x","console","log","img","createElement","src","parentElement","replaceWith","isFullBlocked","window","location","toString","includes","allIframes","width","height","googleAds","length","otherAds","googleAdsDiv","iframesIdsToReplace","iframesSrcToReplace","observer","MutationObserver","mutations","mutation","addedNodes","i","node","nodeName","id","observe","body","childList","subtree","attributes","characterData"],"mappings":"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","file":"content.js","sourceRoot":"../src","sourcesContent":["// iframes are being added dynamically,\n// so it does not make sense to replace them on document load\n\n// in general we can't hijack all iframes, because it would block pages functionalities\n// but on some pages there is no usefull functionalities, so we can use all iframes there\n\nconst fullBlockList = [\n  'onet.pl',\n  'wp.pl'\n]\n\n// document.querySelectorAll('div > a > div > div > div > div > img')\n// to be moved to the helper module\nconst clearWP = () => {\n  const selectorsToReplace = [\n    '#app-content > div > div > div > div > div > a > div > div > img',\n    '#app-content > div > div > div > div > div > a > div > div > div > img',\n    '#app-content > div > div > div > div > div > a > div > div > div > div > img',\n    '#app-content > div > div > div > div > div > a > div > div > div > div > div > img',\n    '#glonews > div > div > div > div > div > div > a > div > div > div > div > div > img',\n    '#glonews > div > div > div > div > div > div > a > div > div > div > div > img',\n    '#glonews > div > div > div > div > div > div > a > div > div > div > img',\n    '#glonews > div > div > div > div > div > div > a > div > div > img',\n    // \"div[id*='bbb'] > a > img\"\n  ]\n\n  selectorsToReplace.forEach(sel => {\n\n    let adImg = document.querySelectorAll(sel)\n    // console.log(`selector: ${sel}`)\n  \n    adImg.forEach(x => {\n      console.log(`replacing divs on wp`)\n      const img = document.createElement(\"img\");\n        img.src = `https://placekitten.com/g/600/200`;\n      x.parentElement.replaceWith(img)\n    })\n  })\n  \n}\n\n\n\n// iframes flow\nlet isFullBlocked = false\nfullBlockList.forEach(x => {\n  if (window.location.toString().includes(x)) {\n    isFullBlocked = true\n  }\n}) \n\nif(fullBlockList) {\n  const allIframes = document.querySelectorAll(\"iframes\");\n  console.log('blocking all found iframes')\n  allIframes.forEach(x => {\n    const img = document.createElement(\"img\");\n    img.src = `https://placekitten.com/g/${x.width}/${x.height}`;\n    x.replaceWith(img);\n\n  })\n} else {\n  const googleAds = document.querySelectorAll(\"iframe[id*='google_ads']\");\n  console.log(`adds in iframes found ${googleAds.length}`);\n  googleAds.forEach((x) => {\n    console.log(\"replacing\");\n    const img = document.createElement(\"img\");\n    img.src = `https://placekitten.com/g/${x.width}/${x.height}`;\n    x.replaceWith(img);\n  });\n  const otherAds = document.querySelectorAll(\"iframe[src*='ads']\");\n  console.log(`other adds found ${otherAds.length}`);\n  otherAds.forEach((x) => {\n    console.log(\"replacing\");\n    const img = document.createElement(\"img\");\n    img.src = `https://placekitten.com/g/${x.width}/${x.height}`;\n    x.replaceWith(img);\n  });\n}\n\n// divs flow\nconst googleAdsDiv = document.querySelectorAll(\"div[id*='google_ads']\");\nconsole.log(`adds in divs found ${googleAdsDiv.length}`);\ngoogleAdsDiv.forEach((x) => {\n  console.log(\"replacing\");\n  const img = document.createElement(\"img\");\n  img.src = `https://placekitten.com/g/${x.width}/${x.height}`;\n  x.replaceWith(img);\n})\n\n\n// for observer\nconst iframesIdsToReplace = [\"google_ads_\"];\nconst iframesSrcToReplace = [\"ads\"];\n\nconst observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if (!mutation.addedNodes) return;\n    if (window.location.toString().includes('wp.pl')) {\n      clearWP();\n    }\n    for (let i = 0; i < mutation.addedNodes.length; i++) {\n      // do things to your newly added nodes here\n      const node = mutation.addedNodes[i];\n      //   console.log(`added node ${node.nodeName}`)\n      \n      if (node.nodeName === \"IFRAME\") {\n        // check full blocked option\n        if (isFullBlocked) {\n          console.log('blocking all iframes')\n          const img = document.createElement(\"img\");\n          img.src = `https://placekitten.com/g/${node.width}/${node.height}`;\n          node.replaceWith(img);\n          return;\n        }\n        // regular flow\n        iframesIdsToReplace.forEach((x) => {\n            if (node.id.includes(x)) {\n            console.log(`iframe to replace by id ${node.id}`);\n            const img = document.createElement(\"img\");\n            img.src = `https://placekitten.com/g/${node.width}/${node.height}`;\n            node.replaceWith(img);\n            return;\n            }\n        });\n        iframesSrcToReplace.forEach((x) => {\n          if (node.src.includes(x)) {\n          console.log(`iframe to replace by src ${node.src}`);\n          const img = document.createElement(\"img\");\n          img.src = `https://placekitten.com/g/${node.width}/${node.height}`;\n          node.replaceWith(img);\n          return;\n          }\n      });\n      }\n    }\n  });\n});\n\nobserver.observe(document.body, {\n  childList: true,\n  subtree: true,\n  attributes: false,\n  characterData: false,\n});\n// #google_ads_iframe_\\/52555387\\/rmadryt\\.pl_HP_top_970x250_ybcm_0\n"]}