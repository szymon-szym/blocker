{"version":3,"sources":["content.js"],"names":["fullBlockList","clearWP","forEach","sel","document","querySelectorAll","x","console","log","img","createElement","src","parentElement","replaceWith","isFullBlocked","window","location","toString","includes","allIframes","length","width","height","googleAds","otherAds","googleAdsDiv","iframesIdsToReplace","iframesSrcToReplace","observer","MutationObserver","mutations","mutation","addedNodes","i","node","nodeName","remove","id","type","observe","body","childList","subtree","attributes","characterData"],"mappings":"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","file":"content.js","sourceRoot":"../src","sourcesContent":["// iframes are being added dynamically,\n// so it does not make sense to replace them on document load\n\n// in general we can't hijack all iframes, because it would block pages functionalities\n// but on some pages there are no usefull functionalities, so we can use all iframes there\n\nconst fullBlockList = [\"onet.pl\", \"wp.pl\"];\n\n// to be moved to the helper module\nconst clearWP = () => {\n  const selectorsToReplace = [\n    \"#app-content > div > div > div > div > div > a > div > div > img\",\n    \"#app-content > div > div > div > div > div > a > div > div > div > img\",\n    \"#app-content > div > div > div > div > div > a > div > div > div > div > img\",\n    \"#app-content > div > div > div > div > div > a > div > div > div > div > div > img\",\n    \"#app-content > div > div > div > div > div > div > a > div > div > img\",\n    \"#glonews > div > div > div > div > div > div > a > div > div > div > div > div > img\",\n    \"#glonews > div > div > div > div > div > div > a > div > div > div > div > img\",\n    \"#glonews > div > div > div > div > div > div > a > div > div > div > img\",\n    \"#glonews > div > div > div > div > div > div > a > div > div > img\",\n    // '#glonews > div > div > div > div > div > div > a'\n    // \"div[id*='bbb'] > a > img\"\n  ];\n\n  selectorsToReplace.forEach((sel) => {\n    let adImg = document.querySelectorAll(sel);\n    // console.log(`selector: ${sel}`)\n\n    adImg.forEach((x) => {\n      console.log(`replacing divs on wp`);\n      const img = document.createElement(\"img\");\n      img.src = `https://placekitten.com/g/600/200`;\n      x.parentElement.replaceWith(img);\n    });\n  });\n};\n\n// iframes flow\nlet isFullBlocked = false;\nfullBlockList.forEach((x) => {\n  if (window.location.toString().includes(x)) {\n    isFullBlocked = true;\n  }\n});\n\nif (fullBlockList) {\n  const allIframes = document.querySelectorAll(\"iframe\");\n  console.log(`blocking all found iframes at start ${allIframes.length}`);\n  allIframes.forEach((x) => {\n    const img = document.createElement(\"img\");\n    img.src = `https://placekitten.com/g/${x.width || \"500\"}/${x.height ||\n      \"300\"}`;\n    x.replaceWith(img);\n  });\n} else {\n  const googleAds = document.querySelectorAll(\"iframe[id*='google_ads']\");\n  console.log(`adds in iframes found ${googleAds.length}`);\n  googleAds.forEach((x) => {\n    console.log(\"replacing\");\n    const img = document.createElement(\"img\");\n    img.src = `https://placekitten.com/g/${x.width || \"500\"}/${x.height || \"300\"}`;\n    x.replaceWith(img);\n  });\n  const otherAds = document.querySelectorAll(\"iframe[src*='ads']\");\n  console.log(`other adds found ${otherAds.length}`);\n  otherAds.forEach((x) => {\n    console.log(\"replacing\");\n    const img = document.createElement(\"img\");\n    img.src = `https://placekitten.com/g/${x.width || \"500\"}/${x.height || \"300\"}`;\n    x.replaceWith(img);\n  });\n}\n\n// divs flow\nconst googleAdsDiv = document.querySelectorAll(\"div[id*='google_ads']\");\nconsole.log(`adds in divs found ${googleAdsDiv.length}`);\ngoogleAdsDiv.forEach((x) => {\n  console.log(\"replacing\");\n  const img = document.createElement(\"img\");\n  img.src = `https://placekitten.com/g/${x.width || \"500\"}/${x.height || \"300\"}`;\n  x.replaceWith(img);\n});\n\n// for observer\nconst iframesIdsToReplace = [\"google_ads_\"];\nconst iframesSrcToReplace = [\"ads\"];\n\nconst observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if (mutation.addedNodes) {\n      if (window.location.toString().includes(\"wp.pl\")) {\n        clearWP();\n      }\n      for (let i = 0; i < mutation.addedNodes.length; i++) {\n        const node = mutation.addedNodes[i];\n\n        if (node.nodeName === \"IFRAME\") {\n          // check full blocked option\n          if (isFullBlocked) {\n            console.log(\"blocking all iframes\");\n            if (node.height == 0) {\n              console.log(`removing 0 px height iframes`)\n              node.remove()\n            }\n            const img = document.createElement(\"img\");\n            img.src = `https://placekitten.com/g/${node.width ||\n              \"500\"}/${node.height || \"300\"}`;\n            node.replaceWith(img);\n            return;\n          }\n          // regular flow\n          iframesIdsToReplace.forEach((x) => {\n            if (node.id.includes(x)) {\n              console.log(`iframe to replace by id ${node.id}`);\n              const img = document.createElement(\"img\");\n              img.src = `https://placekitten.com/g/${node.width || \"500\"}/${\n                node.height || \"300\"\n              }`;\n              node.replaceWith(img);\n              return;\n            }\n          });\n          iframesSrcToReplace.forEach((x) => {\n            if (node.src.includes(x)) {\n              console.log(`iframe to replace by src ${node.src}`);\n              const img = document.createElement(\"img\");\n              img.src = `https://placekitten.com/g/${node.width || \"500\"}/${\n                node.height || \"300\"\n              }`;\n              node.replaceWith(img);\n              return;\n            }\n          });\n        }\n      }\n    } else {\n      console.log(`mutation: ${mutation.type}`);\n    }\n  });\n});\n\nobserver.observe(document.body, {\n  childList: true,\n  subtree: true,\n  attributes: false,\n  characterData: false,\n});\n// #google_ads_iframe_\\/52555387\\/rmadryt\\.pl_HP_top_970x250_ybcm_0\n"]}